<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Following the Player</title>
</head>

<body>
    <script src="main.js"></script>
    <script>
        var world = new World('700', '700', 0, 0);
        world.el.style.border = '2px black solid';
        document.body.appendChild(world.el);
        var player = new world.Critter(350, 350, 40, 40, 0, 'üòâ', 'player');
        document.onclick = function (e) {
            var critter = new world.Critter(e.clientX, e.clientY, 40, 40, 0, 'üòç', 'critter');
            setInterval(function () {
                critter.follow(player, 50);
                if (critter.isCollided(critter, player))
                    location.reload();
            }, 30);
        };
        var controller = {
            keyListener: function (e) {
                var hit = e.type == 'keydown';
                controller[e.key.toLowerCase()] = hit;
            }
        }
        document.onkeydown = controller.keyListener;
        document.onkeyup = controller.keyListener;
        var loop = function () {
            if (controller['w'])
                player.movey(-5);
            if (controller['a'])
                player.movex(-5);
            if (controller['s'])
                player.movey(5);
            if (controller['d'])
                player.movex(5);
            window.requestAnimationFrame(loop);
        }
        window.requestAnimationFrame(loop);
    </script>
</body>

</html>